<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Techscum</title>
    <description>tech/java/ruby stuff, from my brain to yours</description>
    <link>http://blog.colinpilloud.com/</link>
    <atom:link href="http://blog.colinpilloud.com/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Sat, 11 Oct 2014 12:32:01 -0600</pubDate>
    <lastBuildDate>Sat, 11 Oct 2014 12:32:01 -0600</lastBuildDate>
    <generator>Jekyll v2.4.0</generator>
    
      <item>
        <title>Deploying Dropwizard 0.7.x to Heroku</title>
        <description>&lt;p&gt;If you&amp;#39;ve ever deployed an app to Heroku, you know how easy it makes horizontal scaling, and if you&amp;#39;ve ever used Dropwizard, you know how easy it makes creating and maintaining RESTful services.&lt;/p&gt;

&lt;p&gt;Combining these two technologies is actually pretty straightforward. With the advent of Dropwizard 0.7.x, there&amp;#39;s a class explicitly for PaaS deployments: the &lt;a href=&quot;https://dropwizard.github.io/dropwizard/0.7.0/dropwizard-core/apidocs/io/dropwizard/server/SimpleServerFactory.html&quot; title=&quot;SimpleServerFactory documentation&quot;&gt;SimpleServerFactory&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Using this class is as easy as adding the following server settings to your config file.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span class=&quot;s&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;simple&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;applicationContextPath&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;adminContextPath&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/admin&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;connector&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8080&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Specifying the port as 8080 works fine locally, but there&amp;#39;s one more trick for Heroku deployment. Heroku determines the port your application will use dynamically, storing the port as an environment variable at load. Hard coding the port in your config file won&amp;#39;t work, so your Procfile will have to override the port specified in your config file.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;web: java &lt;span class=&quot;nv&quot;&gt;$JAVA_OPTS&lt;/span&gt; -Ddw.server.connector.port&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PORT&lt;/span&gt; -jar target/example&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.jar server prod.yml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here, we set a system property that Dropwizard picks up, overriding the value from the config file with the $PORT environment variable set by Heroku.&lt;/p&gt;

&lt;p&gt;And that&amp;#39;s it! There are other tricks to Dropwizard/Heroku integration (like creating a &lt;a href=&quot;https://dropwizard.github.io/dropwizard/0.7.0/dropwizard-db/apidocs/io/dropwizard/db/DataSourceFactory.html&quot; title=&quot;DataSourceFactory documentation&quot;&gt;DataSourceFactory&lt;/a&gt; from Heroku&amp;#39;s $DATABASE_URL variable) that I may cover in later posts.&lt;/p&gt;
</description>
        <pubDate>Wed, 08 Oct 2014 00:00:00 -0600</pubDate>
        <link>http://blog.colinpilloud.com/deploying-dropwizard-to-heroku</link>
        <guid isPermaLink="true">http://blog.colinpilloud.com/deploying-dropwizard-to-heroku</guid>
        
        
      </item>
    
  </channel>
</rss>
